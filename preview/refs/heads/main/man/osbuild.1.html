<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>Osbuild.1</title>
    <meta name="title" content="Osbuild.1" />
    <meta property="og:title" content="Osbuild.1" />



    <meta name="description" content="OSBUILD" />
    <meta property="og:description" content="OSBUILD" />


    <meta name="author" content="OSBuild Developers" />

    <link rel="shortcut icon" href="/legacy-website/preview/refs/heads/main/images/osbuild.ico" />
    <link rel="stylesheet" type="text/css" href="/legacy-website/preview/refs/heads/main/stylesheets/style.css" />
    <link rel="stylesheet" type="text/css" href="/legacy-website/preview/refs/heads/main/stylesheets/media-icons.css" />

    <link rel="alternate" type="application/atom+xml" title="OSBuild" href="/legacy-website/preview/refs/heads/main/feed.xml" />

  </head>


  <body>
    <header class="tc pv4">
      <div>
        <a href="/legacy-website/preview/refs/heads/main/">
          <img class="h3 w3"
               alt="Back to home"
               src="/legacy-website/preview/refs/heads/main/images/osbuild.png" />
        </a>
        <h1 class="f5 f4-ns fw6 black-70">OSBuild</h1>
        <h2 class="f6 black-70 fw2 ttu tracked">Build-Pipelines for Operating System Artifacts</h2>
      </div>

      <nav class="lh-copy">
        <a href="/legacy-website/preview/refs/heads/main/"
           class="mh2 link blue hover-mid-gray">Home</a>
        <a href="https://www.osbuild.org/guides/introduction.html"
           class="mh2 link blue hover-mid-gray">Documentation</a>

        <a href="https://github.com/osbuild"
           class="mh2 link blue hover-mid-gray">@GitHub</a>

      </nav>
    </header>

    <main class="mw7 overflow-hidden
                 center
                 bt b--light-gray
                 lh-copy markdown">
<article class="pv4 ph2">
<h1>OSBUILD</h1>



<h2 id="heading1">NAME
</h2>


<p style="margin-left:11%; margin-top: 1em">osbuild -
Build-Pipelines for Operating System Artifacts</p>

<h2 id="heading2">SYNOPSIS
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>osbuild</b>
[ OPTIONS ] MANIFEST <b><br/>
osbuild</b> [ OPTIONS ] - <b><br/>
osbuild --help <br/>
osbuild --version</b></p>

<h2 id="heading3">DESCRIPTION
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>osbuild</b>
is a build-system for operating system artifacts. It takes
an input manifest describing the build pipelines and
produces file-system trees, images, or other artifacts as
output. Its pipeline description gives comprehensive control
over the individual steps to execute as part of a pipeline.
<b>osbuild</b> provides isolation from the host system as
well as caching capabilities, and thus ensures that pipeline
builds will be deterministic and efficient.</p>

<h2 id="heading4">OPTIONS
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>osbuild</b>
reads the pipeline description from the file passed on the
command-line. To make <b>osbuild</b> read the pipeline
description from standard input, pass <b>-</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The following
command-line options are supported. If an option is passed,
which is not listed here, <b>osbuild</b> will deny startup
and exit with an error. <b><br/>
-h</b>, <b>--help</b></p>

<p style="margin-left:22%;">print usage information and
exit immediately</p>

<p style="margin-left:11%;"><b>--version</b></p>

<p style="margin-left:22%;">print version information and
exit immediately</p>

<p style="margin-left:11%;"><b>--store=</b><i>DIR</i></p>

<p style="margin-left:22%;">directory where intermediary
file system trees are stored</p>


<p style="margin-left:11%;"><b>-l&nbsp;</b><i>DIR</i>,&nbsp;<b>--libdir=</b><i>DIR</i></p>

<p style="margin-left:22%;">directory containing stages,
assemblers, and the osbuild library</p>


<p style="margin-left:11%;"><b>--cache-max-size=</b><i>SIZE</i></p>

<p style="margin-left:22%;">maximum size of the cache
(bytes) or 'unlimited' for no restriction (size may include
an optional unit suffix, like kB, kiB, MB, MiB and so
on)</p>


<p style="margin-left:11%;"><b>--checkpoint=</b><i>CHECKPOINT</i></p>

<p style="margin-left:22%;">stage to commit to the object
store during build (can be passed multiple times)</p>


<p style="margin-left:11%;"><b>--export=</b><i>OBJECT</i></p>

<p style="margin-left:22%;">object to export (can be passed
multiple times)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<colgroup><col width="11%"></col>
<col width="9%"></col>
<col width="2%" class="center"></col>
<col width="44%"></col>
<col width="34%"></col>
</colgroup>
<tr valign="top" align="left">
<td></td>
<td>


<p><b>--json</b></p></td>
<td></td>
<td>


<p>output results in JSON format</p></td>
<td>
</td></tr>
</table>


<p style="margin-left:11%;"><b>--output-directory=</b><i>DIR</i></p>

<p style="margin-left:22%;">directory where result objects
are stored</p>

<p style="margin-left:11%;"><b>--inspect</b></p>

<p style="margin-left:22%;">return the manifest in JSON
format including all the ids</p>


<p style="margin-left:11%;"><b>--monitor=</b><i>TYPE</i></p>

<p style="margin-left:22%;">name of the monitor to be
used</p>


<p style="margin-left:11%;"><b>--monitor-fd=</b><i>NUM</i></p>

<p style="margin-left:22%;">file-descriptor to be used for
the monitor</p>

<p style="margin-left:11%;"><b>--stage-timeout</b></p>

<p style="margin-left:22%;">set the maximal time (in
seconds) each stage is allowed to run</p>

<p style="margin-left:11%; margin-top: 1em">NB: If neither
<b>--output-directory</b> nor <b>--checkpoint</b> is
specified, no attempt to build the manifest will be
made.</p>

<h2 id="heading5">MANIFEST
</h2>


<p style="margin-left:11%; margin-top: 1em">The input to
<b>osbuild</b> is a description of the pipelines to execute,
as well as required parameters to each pipeline stage. This
data must be <i>JSON</i> encoded. It is read from the file
specified on the command-line, or, if <b>-</b> is passed,
from standard input.</p>

<p style="margin-left:11%; margin-top: 1em">The format of
the manifest is described in <b>osbuild-manifest</b>(5). The
formal schema of the manifest is available online as the
OSBuild JSON Schema [1].</p>

<h2 id="heading6">MONITOR
</h2>


<p style="margin-left:11%; margin-top: 1em">Live activity
of the pipeline execution can be monitored via a built-in
set of different monitors. The <b>--monitor=TYPE</b> option
selects the type of monitor that is used. Valid types are:
<b><br/>
NullMonitor</b></p>

<p style="margin-left:22%;">No live coverage is reported
and all monitoring features are disabled. This is the
default monitor if <b>--json</b> was specified on the
command-line.</p>

<p style="margin-left:11%;"><b>LogMonitor</b></p>

<p style="margin-left:22%;">A human-readable live monitor
of the pipeline execution. This monitor prints pipeline
names, stage names, and relevant options of each stage as it
is executed. Additionally, timing information is provided
for each stage. The output is not machine-readable and is
interspersed with the individual log messages of the stages.
This is the default monitor if <b>--json</b> was <b>not</b>
specified.</p>

<p style="margin-left:11%; margin-top: 1em">Monitor output
is written to the file-descriptor provided via
<b>--monitor-fd=NUM</b>. If none was specified, standard
output is used.</p>

<h2 id="heading7">OUTPUT
</h2>


<p style="margin-left:11%; margin-top: 1em">OSBuild only
ever builds the requested artifacts, rather than all
artifacts defined in a manifest. Each stage and pipeline has
an associated ID (which can be acquired by passing
<b>--inspect</b>). To export an artifact after a stage or
pipeline finished, pass its ID via <b>--export=ID</b>. A
sub-directory will be created in the output-directory with
the ID as the name. The contents of the artifact are then
stored in that sub-directory.</p>

<p style="margin-left:11%; margin-top: 1em">Additionally,
any completed pipeline or stage can be cached to avoid
rebuilding them in subsequent invocations. Use
<b>--checkpoint=ID</b> to request caching of a specific
stage or pipeline.</p>

<h2 id="heading8">EXAMPLES
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
sub-sections contain examples on running <b>osbuild</b>.
Generally, <b>osbuild</b> must be run with superuser
privileges, since this is required to create file-system
images.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Example 1:
Run an empty pipeline</b> <br/>
To verify your <b>osbuild</b> setup, you can run it on an
empty pipeline which produces no output:</p>

<p style="margin-left:15%; margin-top: 1em"># echo {} |
osbuild -</p>

<p style="margin-left:11%; margin-top: 1em"><b>Example 1:
Build a Fedora 30 qcow2 image</b> <br/>
To build a basic qcow2 image of Fedora 30, use:</p>

<p style="margin-left:15%; margin-top: 1em"># osbuild
./samples/base-qcow2.json</p>

<p style="margin-left:11%; margin-top: 1em">The pipeline
definition <b>./samples/base-rpm-qcow2.json</b> is provided
in the upstream source repository of <b>osbuild</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Example 2:
Run from a local checkout</b> <br/>
To run <b>osbuild</b> from a local checkout, use:</p>

<p style="margin-left:15%; margin-top: 1em"># python3 -m
osbuild --libdir . samples/base-rpm-qcow2.json</p>

<p style="margin-left:11%; margin-top: 1em">This will make
sure to execute the <b>osbuild</b> module from the current
directory, as well as use it to search for stages,
assemblers, and more.</p>

<h2 id="heading9">SEE ALSO
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>osbuild-manifest</b>(5),
<b>osbuild-composer</b>(1)</p>

<h2 id="heading10">NOTES
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<colgroup><col width="11%"></col>
<col width="4%"></col>
<col width="3%" class="center"></col>
<col width="82%"></col>
</colgroup>
<tr valign="top" align="left">
<td></td>
<td>


<p style="margin-top: 1em">[1]</p></td>
<td></td>
<td>


<p style="margin-top: 1em">OSBuild JSON Schema v2:
<i>https://osbuild.org/schemas/osbuild2.json</i></p> </td></tr>
 </table>


</article>

    </main>

    <footer class="tc pv3 bt bb b--light-silver bg-light-gray">

<a href="https://github.com/osbuild"><i class="media-icon github"></i></a>
<a href="/legacy-website/preview/refs/heads/main/feed.xml"><i class="media-icon rss"></i></a>

    </footer>
  </body>
</html>
